{% import templateFolder ~ "/public/html/macro/product-list.html.twig" as productList %}
{% import templateFolder ~ "/public/html/macro/form.html.twig" as forms %}
{% if critical %}
    <style>{% include baseFolder ~ "/public/includes/critical/prod-details/prod-details-a.css.twig" %}</style>
{% endif %}
{% for prod in product %}

    {% set productWithVariation = false %}
    {% set countVarImg = 0 %}
    {% if prod.list_variation %}
        {% for list in prod.list_variation %}
            {% for var in list.variation %}
                {% if var.img or var.option[0].img %}
                    {% set countVarImg = countVarImg + 1 %}
                    {% for opt in var.option %}
                        {% set productWithVariation = true %}
                    {% endfor %}
                {% endif %}
            {% endfor %}
        {% endfor %}
    {% endif %}
    {% set tooManyImg = false %}
    {% if countVarImg > 1 %}
        {% set tooManyImg = true %}
    {% endif %}

    {% if not tooManyImg and productWithVariation and css_custom_path %}
        <style>.gallery__primary__wrapper{overflow:hidden}.trigger-for-img-var-mob{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;background-color:#fff;overflow:hidden}.trigger-for-img-var-mob.disable{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid' class='lds-ellipsis'%3E%3Ccircle cx='84' cy='50' r='0'%3E%3Canimate attributeName='r' values='10;0;0;0;0' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='0s'/%3E%3Canimate attributeName='cx' values='84;84;84;84;84' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='0s'/%3E%3C/circle%3E%3Ccircle cx='84' cy='50' r='4.898'%3E%3Canimate attributeName='r' values='0;10;10;10;0' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='-1s'/%3E%3Canimate attributeName='cx' values='16;16;50;84;84' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='-1s'/%3E%3C/circle%3E%3Ccircle cx='67.347' cy='50' r='10'%3E%3Canimate attributeName='r' values='0;10;10;10;0' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='-0.5s'/%3E%3Canimate attributeName='cx' values='16;16;50;84;84' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='-0.5s'/%3E%3C/circle%3E%3Ccircle cx='33.347' cy='50' r='10'%3E%3Canimate attributeName='r' values='0;10;10;10;0' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='0s'/%3E%3Canimate attributeName='cx' values='16;16;50;84;84' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='0s'/%3E%3C/circle%3E%3Ccircle cx='16' cy='50' r='5.102'%3E%3Canimate attributeName='r' values='0;0;10;10;10' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='0s'/%3E%3Canimate attributeName='cx' values='16;16;16;50;84' keyTimes='0;0.25;0.5;0.75;1' keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1' calcMode='spline' dur='2s' repeatCount='indefinite' begin='0s'/%3E%3C/circle%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:80px auto}.trigger-for-img-var-mob.disable-without-loading img,.trigger-for-img-var-mob.disable img{opacity:0}.trigger-for-img-var-mob img{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:auto;height:auto;max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain;opacity:1;-webkit-transition:opacity .3s ease;-o-transition:opacity .3s ease;transition:opacity .3s ease}.trigger-for-img-var-mob .remove{position:absolute;top:30px;right:20px;width:20px;height:20px;background:#10333f;cursor:pointer;border-radius:30px}.trigger-for-img-var-mob .remove:after,.trigger-for-img-var-mob .remove:before{content:"";top:50%;width:80%;height:2px;position:absolute;display:block;background-color:#fff;border-radius:2px;-webkit-transition:all .4s ease;-o-transition:all .4s ease;transition:all .4s ease}.trigger-for-img-var-mob .remove:before{left:10%;-webkit-transform:translate3D(0,-50%,0) rotate(45deg);-ms-transform:translate3D(0,-50%,0) rotate(45deg);transform:translate3D(0,-50%,0) rotate(45deg)}.trigger-for-img-var-mob .remove:after{right:10%;-webkit-transform:translate3D(0,-50%,0) rotate(-45deg);-ms-transform:translate3D(0,-50%,0) rotate(-45deg);transform:translate3D(0,-50%,0) rotate(-45deg)}.trigger-old-picture{position:absolute;width:80px;height:80px;top:0;left:0;cursor:pointer}.trigger-old-picture img{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:auto;height:auto;max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain;opacity:1;-webkit-transition:opacity .3s ease;-o-transition:opacity .3s ease;transition:opacity .3s ease}.prod-details__gallery .trigger-for-img-var-mob .remove{display:none}#main-img-slider-for-small{position:relative}</style>
    {% endif %}

    {% if not w_c_avis_verifies %}
        {% for a in prod.add_com %}
            {% if a.ok or a.ok_valid or a.error %}
                <input type="checkbox" id="hideWrapperValid" class="hidden"/>
                <div class="form__wrapperValid">
                    {% if a.ok or a.ok_valid %}
                        <p class="form__thanks"><i
                                    class="material-icons form__done">done</i>{% if a.ok %}{{ l_shop_add_com_ok }}{% elseif a.ok_valid %}{{ l_shop_add_com_valid }}{% endif %}
                            <label class="form__wrapperValid__close" for="hideWrapperValid"><i class="material-icons">close</i></label>
                        </p>
                    {% else %}
                        {% for e in a.error %}
                            {% for t in e.text %}
                                <div class="form__error form__error--global">
                                    <span class="form__error__span">{{ t.error }}</span>
                                    <label class="form__wrapperValid__close" for="hideWrapperValid"><i
                                                class="material-icons">close</i></label>
                                </div>
                            {% endfor %}
                        {% endfor %}
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}

<div class="prod-details{% if tooManyImg %} prod-details--VarsImg{% endif %}" xmlns="http://www.w3.org/1999/html">
    <form id="prod-form"
          class="prod-details__form prod__form form prod-form{% if prod.variation %} with-price-variation{% endif %}{% if prod.vente_flash %} prod-details__form--flash{% elseif prod.promo_type == 1 and prod.solde == 1 %}  prod-details__form--sale{% elseif prod.promo_type and prod.solde == 0 %} prod-details__form--offer{% elseif prod.new %} prod-details__form--new{% endif %}"
          action="/panier.php" method="post" enctype="multipart/form-data">
        <div class="prod-details__shopping shopping" id="shopping-area">
            <div id="prod-header" class="prod-details__header margin--third">
                <div id="c1-prod-h1"
                     class="prod-details__h1 {% if prod.brand_img_100 %} prod-details__h1--withBrand{% endif %}">
                    <h1 id="prod-h1" class="prod-details__name prod__name">{{ prod.name|raw }}</h1>
                    {% if prod.brand_name %}
                        <p class="prod-details__brand{% if prod.brand_img_100 %} prod-details__brand--img{% endif %}">
                            <a class="prod-details__brand__url"
                               href="{{ prod.brand_url }}">{{ prod.brand_name }}</a>
                            {% for badge in prod.list_badge %}
                                <span class="badge">
                                            <span class="badge__wrapper" style="background:{{ badge.color }};">
                                                <span class="badge__label">{{ badge.label }}</span>
                                            </span>
                                        </span>
                            {% endfor %}
                            {% if prod.brand_img_100 %}
                                <a class="prod-details__brand__img" href="{{ prod.brand_url }}">
                                    <picture class="picture">
                                        {% if webP %}
                                            <source srcset="{{ prod.brand_img_100 }}.webp" type="image/webp">
                                        {% endif %}
                                        <source srcset="{{ prod.brand_img_100 }}">
                                        <img onerror="this.classList.add('error');"
                                             onload="this.classList.remove('error');" src="{{ prod.brand_img_100 }}"
                                             alt="{{ prod.brand_name }}"/>
                                    </picture>
                                </a>
                            {% endif %}
                        </p>
                    {% endif %}
                    {% if w_c_disp_ref and prod.ref %}
                        <p class="prod-details__ref">{{ l_ref }} {{ prod.ref }}</p>
                    {% endif %}
                </div>
            </div>

            {% macro mobilePicture(name,width,img_small,img_medium,img_large,img_raw,lazyload,first,webP) %}
                <picture class="prod-details__picture with-loading">
                    {% if webP %}
                        <source srcset="{{ img_raw }}.webp" type="image/webp">
                    {% endif %}
                    <source {% if lazyload %}data-{% endif %}srcset="{{ img_small }}, {{ img_raw }} 2x"
                            media="(max-width: 380px)"/>
                    <source {% if lazyload %}data-{% endif %}srcset="{{ img_medium }}, {{ img_raw }} 2x"
                            media="(max-width: 400px)"/>
                    {% if width > 840 %}
                        <source {% if lazyload %}data-{% endif %}srcset="{{ img_large }}, {{ img_raw }} 2x"
                                media="(max-width: 840px)"/>
                    {% endif %}
                    <source {% if lazyload %}data-{% endif %}srcset="{{ img_raw }}"/>
                    <img onerror="this.classList.add('error');" onload="this.classList.remove('error');"
                         {% if lazyload %}data-{% endif %}src="{{ img_raw }}"
                         class="{% if lazyload %}lazyload{% endif %} prod-details__img{% if first %} prod__img{% endif %}"
                         alt="{{ name }}"/>
                </picture>
                <div class="prod__loading"></div>
            {% endmacro mobilePicture %}
            {% import _self as slider %}
            {% if prod.img_del or productWithVariation %}
                <div id="main-img-slider-for-small" class="prod-details__small">
                    <div id="c1-main-img-slider-for-small" class="prod-details__small__wrapper">
                        <div class="main-img-slide" data-src="{{ prod.custom_img3 }}">
                            {{ slider.mobilePicture(prod.img_alt,prod.img_raw_width,prod.custom_img2,prod.custom_img3,prod.img,prod.img_raw,false,true,webP) }}
                        </div>
                        {% for img in prod.img_del %}
                            <div class="main-img-slide" data-src="{{ img.custom_img3 }}">
                                {{ slider.mobilePicture(img.img_alt,img.img_raw_width,img.custom_img2,img.custom_img3,img.img,img.img_raw,true,false,webP) }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% else %}
                <div id="main-gallery-for-small" class="prod-details__small">
                    {{ slider.mobilePicture(prod.img_alt,prod.img_raw_width,prod.custom_img2,prod.custom_img3,prod.img,prod.img_raw,true,true,webP) }}
                </div>
            {% endif %}

            {% if prod.resume %}
                <p class="prod-details__summary margin--half" id="prod-summary">{{ prod.resume|raw }}</p>
            {% endif %}
            <div class="prod-details__more margin--third{% if not prod.note %} prod-details__more--oneColumn{% endif %}">
                {% if prod.note %}
                    <div class="prod-details__read read">
                        <div class="stars stars--lvl0 stars--read">
                            <i class="material-icons">{{ l_icon_stars }}</i>
                            <i class="material-icons">{{ l_icon_stars }}</i>
                            <i class="material-icons">{{ l_icon_stars }}</i>
                            <i class="material-icons">{{ l_icon_stars }}</i>
                            <i class="material-icons">{{ l_icon_stars }}</i>
                            <div class="stars stars--lvl1" style="width: {{ prod.note_for }}%;">
                                <div class="stars__wrapper">
                                    <i class="material-icons">{{ l_icon_stars }}</i>
                                    <i class="material-icons">{{ l_icon_stars }}</i>
                                    <i class="material-icons">{{ l_icon_stars }}</i>
                                    <i class="material-icons">{{ l_icon_stars }}</i>
                                    <i class="material-icons">{{ l_icon_stars }}</i>
                                </div>
                            </div>
                        </div>
                        <a href="#prod-details__rating"
                           class="prod-details__read__comment">{% if prod.nb_order == 1 %}{{ l_see_rating_one }}{% else %}{{ l_see_rating_multi }} {{ prod.nb_order }} {{ l_rate }}{% endif %}</a>
                    </div>
                {% endif %}

                {% if w_c_fb_button or w_c_fb_share or w_c_twitter_button or w_c_pinterest_button %}
                    <div class="share__wrapper">
                        <div class="share">
                            <span class="share__title"><span
                                        class="share__title__icon"></span>{{ l_share_product }}</span>
                            <nav class="share__content">
                                {% if w_c_fb_share or w_c_fb_button %}
                                    <a href="//www.facebook.com/sharer/sharer.php?u={{ w_full_current_uri }}"
                                       onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"
                                       class="share__btn share__btn--facebook">{{ l_facebook }}</a>
                                {% endif %}
                                {% if w_c_twitter_button %}
                                    <a href="//twitter.com/share?url={{ w_full_current_uri }}"
                                       onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"
                                       class="share__btn share__btn--twitter">{{ l_twitter }}</a>
                                {% endif %}
                                {% if w_c_pinterest_button %}
                                    <a href="//pinterest.com/pin/create/button/?url={{ w_full_current_uri }}"
                                       class="share__btn share__btn--pinterest"
                                       onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">{{ l_pinterest }}</a>
                                {% endif %}
                                {% if w_c_prev_friend %}
                                    <a href="#partage" class="share__btn share__btn--mail">{{ l_par_email }}</a>
                                {% endif %}
                            </nav>
                        </div>
                    </div>
                {% endif %}

            </div>
            <div class="html-cart">
                <span class="fa fa-truck"></span> <strong>Livraison OFFERTE Exclusivement</strong> <br>
                <span class="fa fa-credit-card"></span> <strong><span style="color: #dcb6a2;">Site et paiement ultra-sécurisés</span></strong> <br>
                <span class="fa fa-shipping-fast"></span> <strong>Estimation du délai de livraison : 16 jours ouvrables</strong>
              </div>
            {% if not pro_access %}
                {% if not prod.indisponible %}
                    {% if prod.variation2 and prod.list_variation %}
                        <div id="variations" class="prod-details__variations">
                            {% for list in prod.list_variation %}
                                <div class="var-list{% if list.img %} var-list-with-img{% endif %}">
                                    <p class="var-h2">{{ list.name }}</p>
                                    {% if list.group and (list.quantity or list.img) %}
                                    <div class="row">
                                        <div class="column small-24 large-8">
                                            {% if list.quantity %}
                                                <div class="var-list-qty">
                                                    <div class="var-qty-input-area qty-wrapper">
                                                        <input class="{{ list.quantity_class }} var-qty-input qty-input"
                                                               type="text" name="{{ list.quantity_name }}"
                                                               id="{{ list.quantity_id }}" value="1"/>
                                                        <a class="var-qty-btn var-qty-more qty-more"><i
                                                                    class="material-icons">add</i></a>
                                                        <a class="var-qty-btn var-qty-less qty-less"><i
                                                                    class="material-icons">remove</i></a>
                                                    </div>
                                                </div>
                                            {% endif %}
                                            {% if list.img %}
                                                <span class="{{ list.img_url_class }} var-list-img {% for var in list.variation %}{% if var.type == 'menu' and loop.first %} variationGroupeMenuImg{% endif %}{% endfor %}"
                                                      href="{{ list.img }}">
                                                            <picture class="picture">
                                                                {% if webP %}
                                                                    <source srcset="{{ list.img_size_100 }}.webp"
                                                                            type="image/webp">
                                                                {% endif %}
                                                            <source srcset="{{ list.img_size_100 }}">
                                                            <img onerror="this.classList.add('error');"
                                                                 onload="this.classList.remove('error');"
                                                                 class="{{ list.img_class }}"
                                                                 src="{{ list.img_size_100 }}"
                                                                 alt="{{ list.img_name }}"/>
                                                            </picture>
                                                        </span>
                                            {% endif %}
                                        </div>
                                        <div class="column small-24 large-16">
                                            {% endif %}

                                            {% if list.group %}
                                            <div class="var-group bg-panel">
                                                {% endif %}

                                                {% for var in list.variation %}
                                                    <div class="var{% if var.img %} var-with-img{% endif %}{% if not list.group and list.quantity %} var-with-qty{% endif %}">
                                                        {% if list.group and var.type == 'menu' %}
                                                        <div class="variationGroupeMenu var-combo-group">
                                                            {% endif %}
                                                            {% if list.group %}
                                                                <p class="var-h3">{{ var.name }}</p>
                                                            {% endif %}
                                                            {% if var.type == 'menu' %}
                                                                <div class="var-combo row">
                                                                    <div class="column{% if not list.group and list.quantity %} small-24 medium-24 large-24 variation-padding-right{% else %} small-24{% endif %}">
                                                                        <div class="var-combo-infos">
                                                                            {% if var.img %}
                                                                                <span class="{{ var.img_url_class }} var-combo-img"
                                                                                      style="position:relative;cursor: pointer;"
                                                                                      data-href="{{ var.img }}"
                                                                                      data-reveal-id="showVariationsImg">
                                                                    <picture class="picture">
                                                                        {% if webP %}
                                                                            <source srcset="{{ var.img_size_100 }}.webp"
                                                                                    type="image/webp">
                                                                        {% endif %}
                                                                    <source srcset="{{ var.img_size_100 }}">
                                                                    <img onerror="this.classList.add('error');"
                                                                         onload="this.classList.remove('error');"
                                                                         class="{{ var.img_class }}"
                                                                         src="{{ var.img_size_100 }}"
                                                                         alt="{{ var.img_name }}"/>
                                                                    </picture>
                                                                </span>
                                                                            {% endif %}
                                                                            <div class="var-combo-input-area">
                                                                                <select class="{{ var.class }} comboBoxHidden combobox form__select"
                                                                                        name="{{ var.form_name }}">
                                                                                    {% for opt in var.option %}
                                                                                        <option {% if opt.sel %} selected="selected"{% endif %}
                                                                                                value="{{ opt.form_value }}" {% if opt.img_size_100 and opt.img_size_100 is not empty %}data-image="{{ opt.img_size_100 }}"{% endif %}>{{ opt.name }} {% if not w_c_pro_access and not list.group and not opt.empty and opt.price %}({% if opt.promo_price %}{{ currency_pre|raw }}{{ opt.promo_price }}{{ currency_post|raw }}{% if not w_c_ttc %} {{ l_ht }}{% endif %}{% else %}{{ currency_pre|raw }}{{ opt.price }}{{ currency_post|raw }}{% if not w_c_ttc %} {{ l_ht }}{% endif %}{% endif %}){% endif %}</option>
                                                                                    {% endfor %}
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    {% if not list.group and list.quantity %}
                                                                        <div class="var-qty-row">
                                                                            <div class="input-price-absolute">
                                                                                <label class="var-qty-lbl hide-for-large-up"
                                                                                       for="{{ var.quantity_id }}">{{ l_quantity }}</label>
                                                                                <div class="var-qty-input-area qty-wrapper">
                                                                                    <input class="{{ var.quantity_class }} var-qty-input qty-input"
                                                                                           id="{{ var.quantity_id }}"
                                                                                           name="{{ var.quantity_name }}"
                                                                                           type="text"
                                                                                           value="{{ list.quantity_min }}"/>
                                                                                    <a class="var-qty-btn var-qty-more qty-more"><i
                                                                                                class="material-icons">add</i></a>
                                                                                    <a class="var-qty-btn var-qty-less qty-less"><i
                                                                                                class="material-icons">remove</i></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    {% endif %}
                                                                </div>
                                                            {% else %}
                                                                {% for opt in var.option %}
                                                                    {% if loop.first %}
                                                                        <ul class="variationOption var-radio-list">
                                                                    {% endif %}
                                                                    <li class="variationRadio var-radio row relative">
                                                                        <div class="column{% if not list.group and list.quantity %} small-24 medium-16 large-18{% else %} small-24{% endif %} not-relative">
                                                                            <div class="var-radio-infos">
                                                                                <div class="var-radio-input-area">
                                                                                    <input type="{{ var.type }}"
                                                                                           class="{{ opt.class }} var-radio-input"
                                                                                           id="{{ opt.id }}"
                                                                                           name="{{ opt.form_name }}"
                                                                                           value="{{ opt.form_value }}"{% if opt.sel %} checked="checked"{% endif %} />
                                                                                    <div class="trigger-radio-checked"
                                                                                         style="display:none;"></div>
                                                                                </div>
                                                                                {% if opt.img %}
                                                                                    <span class="{{ opt.img_url_class }} var-radio-img"
                                                                                          style="position:relative;cursor: pointer;"
                                                                                          data-href="{{ opt.img }}"
                                                                                          data-reveal-id="showVariationsImg">
                                                                <picture class="picture">
                                                                    {% if webP %}
                                                                        <source srcset="{{ opt.img_size_100 }}.webp"
                                                                                type="image/webp">
                                                                    {% endif %}
                                                                <source srcset="{{ opt.img_size_100 }}">
                                                                <img onerror="this.classList.add('error');"
                                                                     onload="this.classList.remove('error');"
                                                                     class="{{ opt.img_class }}"
                                                                     src="{{ opt.img_size_100 }}"
                                                                     alt="{{ opt.img_name }}"/>
                                                                </picture>
                                                            </span>
                                                                                {% endif %}
                                                                                <label for="{{ opt.id }}"
                                                                                       class="var-radio-lbl">
                                                                                    {{ opt.name }} {% if not w_c_pro_access and not list.group and not opt.empty and opt.price %}
                                                                                        <span>
                                                                                        ({% if opt.promo_price %}{{ currency_pre|raw }}{{ opt.promo_price }}{{ currency_post|raw }}{% if not w_c_ttc %} {{ l_ht }}{% endif %}{% else %}{{ currency_pre|raw }}{{ opt.price }}{{ currency_post|raw }}{% if not w_c_ttc %} {{ l_ht }}{% endif %}{% endif %})</span>{% endif %}
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        {% if not list.group and not opt.empty and list.quantity %}
                                                                            <div class="variationQuantiteRadio var-qty-row column small-24 medium-8 large-6"{% if not opt.sel %} style="display: none;"{% endif %}>
                                                                                <label class="var-qty-lbl show-for-small-only"
                                                                                       for="{{ opt.quantity_id }}">{{ l_quantity }}
                                                                                    :</label>
                                                                                <div class="var-qty-input-area qty-wrapper">
                                                                                    <input class="{{ opt.quantity_class }} var-qty-input qty-input"
                                                                                           id="{{ opt.quantity_id }}"
                                                                                           name="{{ opt.quantity_name }}"
                                                                                           type="text"
                                                                                           value="{{ list.quantity_min }}"/>
                                                                                    <a class="var-qty-btn var-qty-more qty-more"><i
                                                                                                class="material-icons">add</i></a>
                                                                                    <a class="var-qty-btn var-qty-less qty-less"><i
                                                                                                class="material-icons">remove</i></a>
                                                                                </div>
                                                                            </div>
                                                                        {% endif %}
                                                                    </li>
                                                                    {% if loop.last %}
                                                                        </ul>
                                                                    {% endif %}
                                                                {% endfor %}
                                                            {% endif %}
                                                            {% if list.group and var.type == 'menu' %}
                                                        </div>
                                                        {% endif %}
                                                    </div>
                                                {% endfor %}

                                                {% if list.group %}
                                            </div>
                                            {% endif %}

                                            {% if list.group and (list.quantity or list.img) %}
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endif %}

                {% if prod.personalisation2 %}
                    <div id="customisations">
                        <h2 id="custo-h1" class="hidden">{{ l_perso_prod|raw }}</h2>
                        {% for custom in prod.list_personalisation %}
                            <div class="custo">
                                <div class="form__fieldset">
                                    <div class="form__field{% if custom.form_type == 'UPLOAD' %} form__field--focused{% endif %}{% if custom.form_type == 'SELECT' %} form__field--focused form__field--dropdown{% endif %}">
                                        <label class="form__label{% if custom.form_type == 'TEXT' and custom.form_option == 0 %} form__label--long-answer{% endif %}{% if custom.form_type == 'DATE' %} form__label--date{% endif %} custo-h2"
                                               for="custo-{{ loop.index }}">
                                                <span class="form__span">{{ custom.title }}{% if not w_c_pro_access and custom.price > 0 %}
                                                        <span>
                                                        ({{ currency_pre|raw }}{{ custom.price }}{{ currency_post|raw }}{% if not w_c_ttc %} {{ l_ht }}{% endif %})</span>{% endif %}{% if custom.needed %} *{% endif %}</span>
                                            {% if custom.form_type == 'DATE' %}
                                                <i class="form__icon form__icon--date material-icons">date_range</i>
                                            {% endif %}
                                        </label>
                                        {% if custom.form_type == 'SELECT' %}
                                            <div class="container-custo-select" style="width:100%">
                                                <select{% if custom.needed %} required{% endif %}
                                                        class="form__select" id="custo-{{ loop.index }}"
                                                        name="{{ custom.form_name }}">
                                                    {% if not custom.needed %}
                                                        <option value="">{{ l_none }}</option>
                                                    {% endif %}
                                                    {% for form in custom.form_option %}
                                                        {% if custom.form_value == form.value %}
                                                            <option selected="selected"
                                                                    value="{{ form.value }}">{{ form.value }}</option>
                                                        {% else %}
                                                            <option value="{{ form.value }}">{{ form.value }}</option>
                                                        {% endif %}
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        {% elseif custom.form_type == 'UPLOAD' %}
                                            <input type="file"
                                                   {% if custom.needed %}class="fileForm obligForm form__file"
                                                   required{% else %}class="fileForm form__file"{% endif %}
                                                   id="custo-{{ loop.index }}" name="{{ custom.form_name }}"
                                                   value="{{ custom.form_value }}">
                                            {% for form in custom.form_option %}{% if loop.first %}<p class="file-formats">{{ l_accept_files }} : {% endif %}{% if not loop.first %}, {% endif %}{{ form.value }}{% if loop.last %}</p>{% endif %}{% endfor %}
                                        {% elseif custom.form_type == 'DATE' %}
                                            <div class="form__dateArea">
                                                <input type="text"
                                                       {% if custom.needed %}class="dateForm date-input obligForm form__text form__text--date"
                                                       required{% else %}class="dateForm date-input form__text form__text--date"{% endif %}
                                                       id="custo-{{ loop.index }}" name="{{ custom.form_name }}"
                                                       value="{{ custom.form_value }}" autocomplete="off"/>
                                            </div>
                                        {% elseif custom.form_type == 'TEXT' and custom.form_option == 0 %}
                                            <textarea
                                                    {% if custom.needed %}class="textForm obligForm form__text form__text--area"
                                                    required{% else %}class="textForm form__text form__text--area"{% endif %} id="custo-{{ loop.index }}"
                                                    name="{{ custom.form_name }}" rows="6"
                                                    cols="80">{{ custom.form_value }}</textarea>
                                        {% else %}
                                            <input type="text"
                                                   {% if custom.needed %}class="textForm obligForm form__text"
                                                   required{% else %}class="textForm form__text"{% endif %}
                                                   id="custo-{{ loop.index }}" name="{{ custom.form_name }}"
                                                   maxlength="{{ custom.form_option }}"
                                                   value="{{ custom.form_value }}"/>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}



                <div class="prod-details__bottom">
                    {% if prod.vente_flash %}
                        <div class="flash-sale__wrapper margin--third">
                            <div class="flash-sale">
                                <div class="c1-flash-sale">
                                    <p class="flash-sale-h1">
                                        {{ l_flash_sale }}
                                    </p>
                                    <p class="countdown" id="countdown-{{ prod.id }}"
                                       data-year="{{ prod.annee_fin }}" data-month="{{ prod.mois_fin }}"
                                       data-day="{{ prod.jour_fin }}" data-hour="{{ prod.heure_fin }}"
                                       data-min="{{ prod.minute_fin }}" data-sec="{{ prod.seconde_fin }}">
                                <span class="dash weeks-dash">
                                    <span class="digit">0</span>
                                    <span class="digit">0</span>
                                    <span class="dash-ext">{{ l_abbr_week }}</span>
                                </span>
                                        <span class="dash days-dash">
                                    <span class="digit">0</span>
                                    <span class="digit">0</span>
                                    <span class="dash-ext">{{ l_abbr_day }}</span>
                                </span>
                                        <span class="dash hours-dash">
                                    <span class="digit">0</span>
                                    <span class="digit">0</span>
                                    <span class="dash-ext">{{ l_abbr_hour }}</span>
                                </span>
                                        <span class="dash minutes-dash">
                                    <span class="digit">0</span>
                                    <span class="digit">0</span>
                                    <span class="dash-ext">{{ l_abbr_minute }}</span>
                                </span>
                                        <span class="dash seconds-dash">
                                    <span class="digit">0</span>
                                    <span class="digit">0</span>
                                    <span class="dash-ext">{{ l_abbr_second }}</span>
                                </span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    {% if prod.promo_type or (prod.promo_type and prod.vente_flash) %}
                        <p class="so-sentence so-display state margin--third {{ prod.solde ? 'state--sale' : 'state--specialOffer' }}{% if (not prod.vente_flash and prod.promo_type == 2) or (prod.vente_flash and prod.promo_type == 1) %}{% elseif prod.promo_type == 2 %}{% else %} no-affiche-promo{% endif %}">
                            <span class="{% if (not prod.vente_flash and prod.promo_type == 2) or (prod.vente_flash and prod.promo_type == 1) %} so-reduc state__promo state__promo--reduc{% elseif prod.promo_type == 2 %} so-perc state__promo state__promo--perc{% else %} so-reduc state__promo state__promo--reduc{% endif %}">{% if (not prod.vente_flash and prod.promo_type == 2) or (prod.vente_flash and prod.promo_type == 1) %}- {{ prod.promo_pour_round }}%{% elseif prod.promo_type == 2 %}- {{ currency_pre|raw }}{{ prod.promo_reduc }}{{ currency_post|raw }}{% else %}- {{ currency_pre|raw }}{{ prod.promo_reduc }}{{ currency_post|raw }}{% endif %}</span><span
                                    class="so-dates state__date"><span
                                        class="so-type state__date__type">{% if prod.promo_type and prod.solde == 1 or prod.promo_type and prod.solde == '1' %}{{ l_soldes_du }}{% elseif prod.promo_type or prod.vente_flash %}{{ l_promotion_du }}{% endif %}</span> <span
                                        class="so-start state__date__start">{% if prod.promo_type %}{{ prod.promo_begin }}{% endif %}</span> {{ l_au }} <span
                                        class="so-end state__date__end">{% if prod.promo_type %}{{ prod.promo_end }}{% endif %}</span></span>
                        </p>
                    {% endif %}



                    {% if prod.new_product and not prod.vente_flash and not prod.promo_type %}
                        <p class="so-sentence so-display state"><span class="state-type">{{ l_new }}</span></p>
                    {% endif %}


                    <div id="price-area">
                        <p id="price" class="prod__price">
                            <strong class="price-cur-container"><span
                                        class="price-cur"{% if not prod.variation_price %} data-price-cur="{{ prod.shown_price_script }}"{% endif %} >{{ currency_pre|raw }}{% if prod.promo_type %}{{ prod.shown_price }}{% else %}{{ prod.shown_price_no_promo }}{% endif %}{{ currency_post|raw }}</span>{% if w_c_ttc == false %}
                                <span class="et">{{ l_ht }}{% elseif w_c_second_price %}{{ l_ttc }}</span>{% endif %}
                            </strong>
                            <del class="price-old-container"><span
                                        class="price-old"{% if not prod.variation_price %} data-price-old="{% if prod.promo_price_script %}{{ prod.script_price }}{% endif %}"{% endif %}>{% if prod.promo_type %}{{ currency_pre|raw }}{{ prod.shown_price_no_promo }}{{ currency_post|raw }}{% endif %}</span>{% if w_c_ttc == false %}
                                <span
                                class="et{% if not prod.promo_price and not prod.variation2 %} hidden{% elseif prod.variation2 %} so-display{% endif %}">{{ l_ht }}</span>{% endif %}
                            </del>
                            {% if w_c_second_price %}
                                <span class="price-cur-inv-container"><span
                                            class="price-cur-inv">{{ currency_pre|raw }}{{ prod.shown_price_reverse }}{{ currency_post|raw }}</span>{% if w_c_ttc == false %}
                                        <span class="it">{{ l_ttc }}</span>{% else %}<span
                                        class="et">{{ l_ht }}</span>{% endif %}</span>
                            {% endif %}
                            {% if prod.eco_part %}<span
                                    id="ecotax">{{ l_eco_part }} {{ currency_pre|raw }}{{ prod.eco_part }}{{ currency_post|raw }}</span>{% endif %}
                        </p>

                        {% if w_c_stock %}
                            {% if prod.var_livraison %}
                                <p id="prod-stock-custom">
                                    <span class="icon icon-stock-ok icon__dot"></span>
                                    <span class="stock-custom stock-ok">{{ prod.var_livraison }}</span>
                                </p>
                            {% endif %}
                            <p id="prod-stock"
                               class="{% if prod.var_livraison %}hide-for-small-up {% endif %}stockcontainer{% if w_c_stock and ((prod.stock or prod.stock > 0) or (prod.variation2 and prod.shown_stock)) %} stock-ok{% elseif w_c_stock %} stock-ko{% endif %}">
                                <span class="icon icon-stock-ok icon__dot"></span>
                                <span class="icon icon-stock-ko icon__dot"></span>
                                <span class="stock{% if w_c_stock and ((prod.stock or prod.stock > 0) or (prod.variation2 and prod.shown_stock)) %} stock-ok{% elseif w_c_stock %} stock-ko{% endif %}{% if prod.variation %} stock-var{% endif %}">{% if w_c_stock and not prod.variation2 %}{{ prod.stock_phrase }}{% elseif w_c_stock and prod.variation2 and prod.shown_stock %}{{ l_en_stock }}{% elseif w_c_stock and prod.variation2 %}{{ l_stock_epuise }}{% endif %}</span>
                            </p>
                        {% endif %}

                    </div>


                    <div id="container-global-bottom"
                         {% if not w_c_product_quantity %}class="without-qty"{% endif %}>
                        {% if w_c_product_quantity %}
                            <div id="w2-quantity">
                                <div id="w1-quantity" class="qty-wrapper">
                                    <input class="quantity qty-input"{% if prod.var_prod_qty_min %} min="{{ prod.var_prod_qty_min }}"{% endif %}{% if prod.var_prod_qty_max %} max="{{ prod.var_prod_qty_max }}"{% endif %}{% if prod.var_prod_qty_step %} step="{{ prod.var_prod_qty_step }}"{% endif %}
                                           id="quantity" name="{{ prod.nb_form }}" placeholder="{{ l_quantity }}"
                                           type="number" {% if prod.var_prod_min_qty and prod.var_prod_min_qty > 1 %}value="{{ prod.var_prod_min_qty }}" min="{{ prod.var_prod_min_qty }}"{% else %}value="1" min="1"{% endif %} {% if not prod.var_prod_qty_step %}step="1"{% endif %} />
                                    <a id="qty-more-btn" class="qty-btn qty-more"><i class="material-icons">add</i></a>
                                    <a id="qty-less-btn" class="qty-btn qty-less"><i
                                                class="material-icons">remove</i></a>
                                </div>
                            </div>
                        {% endif %}
                        {% if w_c_ookoodoo %}
                            {% set ookoodoo_url = 'https://www.ookoodoo.com' %}
                            <a id="add_to_ookoodoo" class="button btn2" style="display: none;"
                               href="{{ ookoodoo_url }}" title="{{ l_ajouter_liste_cadeaux_2 }}"><span
                                        class="c1-button"><i
                                            class="material-icons">card_giftcard</i>{{ l_ajouter_liste_cadeaux }}</span></a>
                        {% endif %}


                        <div id="prod-add-cart"
                             class="{% if w_c_stock and w_c_stock_alert and prod.buyable == 0 %}not-buyable{% else %}buyable{% endif %}">
                            <div id="c1-prod-add-cart"{% if w_c_stock %} class="stockcontainer{% if not prod.variation2 %}{% if prod.stock or prod.stock > 0 %} stock-ok{% else %} stock-ko{% endif %}{% endif %}"{% endif %}>
                                <button class="button large expand prod__btn--addCart" type="submit"
                                        id="add-cart-btn"><span><i
                                                class="material-icons">shopping_basket</i>{{ l_add_cart }}</span>
                                </button>
                                {% if buyableWhateverStock != -1 %}
                                    <a class="button btn1 expand {% if not w_c_whishnbox and not w_c_ookoodoo %}with-ookoodoo{% endif %}"
                                       id="alert-btn" data-reveal-id="alert-modal"><span class="c1-button"><i
                                                    class="material-icons">phone_in_talk</i>{{ l_avertir_disponible }}</span></a>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    {% if not w_c_amazon_hide_button_product and w_c_amazon and not w_c_amazon_logged_in %}
                        <div class="wrap__amazon wrap__amazon--prodDetails">
                            <p class="wrap__amazon__text">{{ l_message_amazon_login|raw }}</p>
                            <a class="button expand ident-btn ident-amazon-btn ident-amazon-btn--paid amazonAddCart">
                                    <span class="c1-ident-btn"><span class="icon"></span> <span class="arrowAmazon"><i
                                                    class="material-icons">arrow_forward_ios</i><i
                                                    class="material-icons">arrow_forward_ios</i></span> <span
                                                class="with-account">Utilisez votre compte amazon</span></span>
                                <div id="addCartWithAmazon" class="amazonLogin"></div>
                            </a>
                        </div>
                    {% endif %}
                </div>

            {% else %}

                <a class="button alert large expand" id="goto-contact-btn"
                   href="{% if l_access_pro_url %}{{ l_access_pro_url }}{% elseif l_acces_pro_url %}{{ l_acces_pro_url }}{% else %}{{ w_c_contact_link }}{% endif %}">{{ l_contact_us }}</a>


            {% endif %}




            {% if prod.slice %}
                <div class="range {% if prod.slice|length > 8 %}range--vertical{% endif %}">
                    <p class="range__title">{{ l_beneficiez_remise_quantite }}</p>
                    <div class="range__global">
                        <div class="range__top">
                            <div class="range__subtitle">{{ l_a_partir_de }}</div>
                            <div class="range__wrapper">
                                {% for sl in prod.slice %}
                                    <div class="range__item">{{ sl.quantity }}</div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="range__bottom">
                            <p class="range__subtitle">{{ l_discount }}</p>
                            <div class="range__wrapper">
                                {% for sl in prod.slice %}
                                    <div class="range__item">{% if sl.promo_type == 1 %}{{ currency_pre|raw }}{% endif %}{{ sl.promo|replace({'.':','}) }}{% if sl.promo_type == 1 %}{{ currency_post|raw }}{% else %}%{% endif %}</div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}


        </div>


        {% macro pictureGallery(name,img_380,img_400,img_medium,img_large,first,webP) %}
            <picture class="gallery__picture with-loading">
                {% if webP %}
                    <source srcset="{{ img_large }}.webp" type="image/webp">
                {% endif %}
                <source {% if not first %}data-{% endif %}srcset="{{ img_380 }}"
                        media="(max-width: 380px)"/>
                <source {% if not first %}data-{% endif %}srcset="{{ img_400 }}"
                        media="(max-width: 400px)"/>
                {% if 'm840' in img_medium %}
                    <source {% if not first %}data-{% endif %}srcset="{{ img_medium }}"
                            media="(max-width: 840px)"/>
                {% elseif 'm1440' in img_medium %}
                    <source {% if not first %}data-{% endif %}srcset="{{ img_medium }}"
                            media="(max-width: 1440px)"/>
                {% endif %}
                <img {% if not first %}data-{% endif %}src="{{ img_large }}"
                     onerror="this.classList.add('error');"
                     onload="this.classList.remove('error');"
                     class="{% if not first %}lazyload{% endif %} gallery__img{% if first %} prod__img{% endif %}"
                     data-zoom-image="{{ img_large }}"
                     alt="{{ name }}"/>
            </picture>
            <div class="prod__loading"></div>
        {% endmacro pictureGallery %}

        <div class="prod-details__gallery gallery">
            <div class="gallery__primary{% if prod.img_del %} gallery__primary--slider{% endif %}">
                <div class="gallery__primary__wrapper">
                    <div class="gallery__primary__slider lazyload loader" id="prod-gallery">
                        <div class="gallery__item gallery__item--first">
                            {{ slider.pictureGallery(prod.img_name,prod.custom_img2,prod.custom_img3,prod.img,prod.img_raw,1,webP) }}
                        </div>
                        {% if prod.img_del %}
                            {% for img in prod.img_del %}
                                <div class="gallery__item">
                                    {{ slider.pictureGallery(img.img_name,img.custom_img2,img.custom_img3,img.img,img.img_raw,0,webP) }}
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                {% if prod.img_del %}
                    <div class="gallery__thumbnail{% if 6 > prod.img_del|length %} gallery__thumbnail--light{% endif %}">
                        <div class="gallery__item gallery__item--thumb">
                            <picture class="picture">
                                {% if webP %}
                                    <source srcset="{{ prod.img_size_150 }}.webp" type="image/webp">
                                {% endif %}
                                <source srcset="{{ prod.img_size_150 }}">
                                <img onerror="this.classList.add('error');" onload="this.classList.remove('error');"
                                     class="gallery__img loader" src="{{ prod.img_size_150 }}"
                                     alt="{{ prod.img_name }}">
                            </picture>
                        </div>
                        {% for img in prod.img_del %}
                            <div class="gallery__item gallery__item--thumb">
                                <picture class="picture">
                                    {% if webP %}
                                        <source {% if loop.index > 6 %}data-{% endif %}srcset="{{ img.img_size_150 }}.webp"
                                                type="image/webp">
                                    {% endif %}
                                    <source {% if loop.index > 6 %}data-{% endif %}srcset="{{ img.img_size_150 }}">
                                    <img onerror="this.classList.add('error');"
                                         onload="this.classList.remove('error');"
                                         {% if loop.index > 6 %}data-{% endif %}src="{{ img.img_size_150 }}"
                                         class="gallery__img {% if loop.index > 6 %}lazyload{% endif %} loader"
                                         alt="{{ img.img_name }}">
                                </picture>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>


        {% if not w_c_product_quantity %}
            <input type="hidden" class="quantity" id="quantity" name="nb_prod" value="1"/>
        {% endif %}
        <input type="hidden" name="id_prod" value="{{ prod.id }}"/>

    </form>


    <div class="prod-details__infos prod-infos">
        <div class="prod-infos__wrapper">
            <div class="prod-infos__desc">
                <h2 class="prod-infos__title">{{ l_description }} <span
                            class="hidden">{{ l_of_product }} &laquo;&nbsp;{{ prod.name }}&nbsp;&raquo;</span><span
                            class="icon icon--arrow-cross"></span></h2>
                {% for d in prod.desc %}
                    {% if d.type == 'titre' %}
                        <h3> {{ d.text|raw }}</h3>
                    {% elseif d.type == 'soustitre' %}
                        <h4> {{ d.text|raw }}</h4>
                    {% else %}
                        <p>{{ d.text|raw }}</p>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

    {% if prod.list_carac %}
        <div class="prod-details__carac prod-carac">
            <div class="prod-carac__wrapper">
                <div class="prod-carac__desc">
                    <h2 class="prod-carac__title">{{ l_caracteristiques }} <span class="hidden">{{ l_of_product }} &laquo;&nbsp;{{ prod.name }}&nbsp;&raquo;</span><span
                                class="icon icon--arrow-cross"></span></h2>
                    <ul>
                        {% for list in prod.list_carac %}
                            <li>{{ list.name|raw }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    {% endif %}

    {% if prod.add_com %}
        <div class="prod-details__note prod-rate">
            <div class="prod-rate__wrapper">
                {% if prod.note or prod.com %}
                    <div class="prod-rate__title">
                        <h2><span class="hidden">{{ l_il_y_a }} {{ prod_com_count }} </span>{{ l_comment_product }}
                            <span class="hidden">{{ l_avis_sur_produit }} &laquo;&nbsp;{{ prod.name }}&nbsp;&raquo;</span>
                        </h2><span class="icon icon--arrow-cross"></span><span class="rgpd"><span
                                    class="rgpd__icon">?</span><span class="rgpd__content"><span
                                        class="rgpd__content__fixed">{{ l_rate_text_expl|raw }}</span></span></span>
                        {% if w_c_avis_verifies %}
                            <picture>
                                {% if webp %}
                                    <source srcset="https://media.cdnws.com/_i/131/3203/2692/5/logo-avisverifies.png.webp"
                                            type="image/webp">
                                {% endif %}
                                <source srcset="https://media.cdnws.com/_i/131/3203/2692/5/logo-avisverifies.png">
                                <img class="lazyload img-avis-verifie"
                                     data-src="https://media.cdnws.com/_i/131/3203/2692/5/logo-avisverifies.png"
                                     alt="{{ l_avis_verifie }}" {{ attr }}>
                            </picture>
                        {% endif %}
                    </div>
                    {% for a in prod.add_com %}
                        {% if not a.ok and not a.ok_valid %}
                            <span class="prod-rate__show prod-rate__show--top button">{{ l_comment_product_multiple }}</span>
                        {% endif %}
                    {% endfor %}
                    <div class="prod-rate__rating">
                        {% for c in prod.com %}
                            <div class="prod-rate__com margin--third{{ c.admin ? ' prod-rate__com--admin' }}">
                                <div class="prod-rate__com__header {% if not w_c_has_prod_note %} prod-rate__com__header--withoutStars{% endif %}">
                                    <strong class="prod-rate__com__author">{{ c.author_url ? '<a href="' ~ c.author_url ~ '"></a>' : c.author }}</strong>
                                    <time class="prod-rate__com__time">{{ l_the }} {{ c.date }} {{ l_of }} {{ c.hour }}</time>
                                    {% if c.note %}
                                        <div class="prod-rate__stars">
                                            <i class="material-icons prod-rate__stars--active">{{ l_icon_stars }}</i>
                                            <i class="material-icons{% if c.note > 1 %} prod-rate__stars--active{% endif %}">{{ l_icon_stars }}</i>
                                            <i class="material-icons{% if c.note > 2 %} prod-rate__stars--active{% endif %}">{{ l_icon_stars }}</i>
                                            <i class="material-icons{% if c.note > 3 %} prod-rate__stars--active{% endif %}">{{ l_icon_stars }}</i>
                                            <i class="material-icons{% if c.note > 4 %} prod-rate__stars--active{% endif %}">{{ l_icon_stars }}</i>
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="prod-rate__com__content">
                                    <p class="prod-rate__com__text">{{ c.content|raw }}</p>
                                </div>
                            </div>
                        {% endfor %}
                        {% if prod.com|length > 1 %}
                        <p class="prod-rate__directUrl"><a
                                    href="{{ prod_all_com_url|raw }}">{{ prod_com_full_l|raw }}
                                <strong>{{ prod.name }}</strong></a></p>
                        {% endif %}
                    </div>
                {% else %}
                    <h2 class="prod-rate__title">{{ l_comment_product }} <span
                                class="hidden">{{ l_of_product ~ ' ' ~ prod.name }}</span><span
                                class="icon icon--arrow-cross"></span></h2>
                    {% if w_c_has_prod_note %}
                        <div class="prod-rate__empty">
                            <div class="prod-rate__stars">
                                <i class="material-icons">{{ l_icon_stars }}</i>
                                <i class="material-icons">{{ l_icon_stars }}</i>
                                <i class="material-icons">{{ l_icon_stars }}</i>
                                <i class="material-icons">{{ l_icon_stars }}</i>
                                <i class="material-icons">{{ l_icon_stars }}</i>
                            </div>
                            <p class="prod-rate__empty__text">{{ l_no_rate_product }}</p>
                        </div>
                    {% endif %}
                    {% for a in prod.add_com %}
                        {% if not a.ok and not a.ok_valid %}
                            <span class="prod-rate__show button">{{ l_first_to_comment }}</span>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    {% endif %}

    {% for a in prod.add_com %}
        {% if not a.ok and not a.ok_valid %}
            <form action="{{ a.form }}" class="form form--comment-shop form--test" method="post" id="comment-form">
                <p class="form__subtitle">{{ l_your_comment_product }} <span
                            class="hidden">{{ l_of_product ~ ' ' ~ prod.name_script }}</span><span
                            class="icon icon--arrow-cross"></span></p>
                {% if a.form_content %}
                    {% if a.form_note %}
                        <div class="form__fieldset form__fieldset--rating">
                            <div class="form__rating">
                                <input type="radio" class="form__rating__input" id="rating-5"
                                       data-name="{{ a.form_note }}" name="{{ a.form_note }}" value="5" checked/>
                                <label class="form__rating__label" for="rating-5"
                                       title="{{ l_note }} : 5 {{ l_sur }} 5">
                                    <i class="material-icons form__rating__icon">star_rate</i>
                                    <span class="form__rating__hidden">5</span>
                                </label>
                                <input type="radio" class="form__rating__input" id="rating-4"
                                       name="{{ a.form_note }}" value="4"/>
                                <label class="form__rating__label" for="rating-4"
                                       title="{{ l_note }} : 4 {{ l_sur }} 5">
                                    <i class="material-icons form__rating__icon">star_rate</i>
                                    <span class="form__rating__hidden">4</span>
                                </label>
                                <input type="radio" class="form__rating__input" id="rating-3"
                                       data-name="{{ a.form_note }}" name="{{ a.form_note }}" value="3"/>
                                <label class="form__rating__label" for="rating-3"
                                       title="{{ l_note }} : 3 {{ l_sur }} 5">
                                    <i class="material-icons form__rating__icon">star_rate</i>
                                    <span class="form__rating__hidden">3</span>
                                </label>
                                <input type="radio" class="form__rating__input" id="rating-2"
                                       data-name="{{ a.form_note }}" name="{{ a.form_note }}" value="2"/>
                                <label class="form__rating__label" for="rating-2"
                                       title="{{ l_note }} : 2 {{ l_sur }} 5">
                                    <i class="material-icons form__rating__icon">star_rate</i>
                                    <span class="form__rating__hidden">2</span>
                                </label>
                                <input type="radio" class="form__rating__input" id="rating-1"
                                       data-name="{{ a.form_note }}" name="{{ a.form_note }}" value="1"/>
                                <label class="form__rating__label" for="rating-1"
                                       title="{{ l_note }} : 1 {{ l_sur }} 5">
                                    <i class="material-icons form__rating__icon">star_rate</i>
                                    <span class="form__rating__hidden">1</span>
                                </label>
                            </div>

                            <select data-name="{{ a.form_note }}"
                                    class="form__rating__select form__select margin--third hidden"
                                    id="select-rating-mobile">
                                <option selected hidden>{{ l_choose_your_rating }}</option>
                                <option value="1">{{ l_note }} : 1 {{ l_sur }} 5</option>
                                <option value="2">{{ l_note }} : 2 {{ l_sur }} 5</option>
                                <option value="3">{{ l_note }} : 3 {{ l_sur }} 5</option>
                                <option value="4">{{ l_note }} : 4 {{ l_sur }} 5</option>
                                <option value="5">{{ l_note }} : 5 {{ l_sur }} 5</option>
                            </select>


                        </div>
                    {% endif %}
                    <div class="form__fieldset">
                        <div class="form__field form__field--long-answer form__field--required {% if a.val_content %} form__field--focused{% endif %}">
                            <label class="form__label" for="rating-comment">
                                <span class="form__span">{{ l_votre_com }}</span>
                            </label>
                            <textarea class="form__text form__text--area" required="required" id="rating-comment"
                                      name="{{ a.form_content }}" rows="6" cols="80">{{ a.val_content }}</textarea>
                            <i class="material-icons form__icon--warning">error</i>
                            <i class="material-icons form__icon--success">check_circle</i>
                        </div>
                    </div>
                {% endif %}

                <div class="form__wrapHidden">
                    {% if a.form_login and a.form_pass %}
                        <p class="form__text__rating form__text__rating--title">{{ l_customer_allow_rating }}</p>
                        <p class="form__text__rating">{{ l_require_for_rating }}</p>
                    {% endif %}
                    <div class="form__fieldset">
                        <div class="form__field{% if a.val_name %} form__field--focused{% endif %} form__field--short-answer form__field--required">
                            <label class="form__label" for="rating-name">
                                <span class="form__span">{{ l_pseudo }}</span>
                            </label>
                            <input class="form__text" type="text" required="required" id="rating-name"
                                   name="{{ a.form_name }}" value="{{ a.val_name }}"/>
                            <i class="material-icons form__icon--warning">error</i>
                            <i class="material-icons form__icon--success">check_circle</i>
                        </div>
                    </div>
                    {% if a.form_mail %}
                        <div class="form__fieldset">
                            <div class="form__field form__field--short-answer form__field--required">
                                <label class="form__label" for="rating-email">
                                    <span class="form__span">{{ l_your_email }} ({{ l_paspublie }})</span>
                                </label>
                                <input class="form__text form__text--email" type="email" required="required"
                                       id="rating-email" name="{{ a.form_mail }}" value="{{ a.val_mail }}"/>
                                <i class="material-icons form__icon--warning">error</i>
                                <i class="material-icons form__icon--success">check_circle</i>
                            </div>
                        </div>
                    {% endif %}
                    {% if a.form_login and a.form_pass %}
                        <div class="form__fieldset">
                            <div class="form__field form__field--short-answer form__field--required">
                                <label class="form__label" for="rating-login">
                                    <span class="form__span">{{ l_email_connexion }}</span>
                                </label>
                                <input class="form__text form__text--email" type="email" required="required"
                                       id="rating-login" name="{{ a.form_login }}" value="{{ a.val_login }}"/>
                                <i class="material-icons form__icon--warning">error</i>
                                <i class="material-icons form__icon--success">check_circle</i>
                            </div>
                        </div>
                        <div class="form__fieldset">
                            <div class="form__field form__field--short-answer form__field--required">
                                <label class="form__label" for="rating-password">
                                    <span class="form__span">{{ l_password }}</span>
                                </label>
                                <input class="form__text form__text--email" type="password" required="required"
                                       id="rating-password" name="{{ a.form_pass }}" value="{{ a.val_pass }}"/>
                                <i class="material-icons form__icon--warning">error</i>
                                <i class="material-icons form__icon--success">check_circle</i>
                            </div>
                        </div>
                    {% endif %}
                    {{ a.form_hidden_id|raw }}
                    <div class="form__fieldset">
                        <div class="form__field form__field--btnArea">
                            <input class="form__button button" id="validate-btn" type="submit"
                                   name="{{ a.form_valid }}" value="{{ l_send }}"/>
                        </div>
                    </div>
                </div>
            </form>
        {% endif %}
    {% endfor %}

    {% if w_c_prev_friend %}
        {% for s in share %}
            <form id="partage"
                  class="share-friend form form--page{% if s.info_perso or s.error or s.ok_friend %} show{% endif %}"
                  action="{{ s.form }}" method="post">
                {% if s.ok_friend %}
                    <p class="form__thanks"><i class="material-icons form__done">done</i>{{ l_partage_ok|raw }}</p>
                {% else %}
                    <p class="share-friend__title">{{ l_info_call_friend|raw }}</p>
                {% endif %}

                {% for e in s.error %}
                    {% for t in e.text %}
                        <div class="form__error form__error--global">
                            <span class="form__error__span">{{ t.error }}</span>
                        </div>
                    {% endfor %}
                {% endfor %}

                {% if s.info_perso %}
                    {{ forms.wiziInput('text',s.form_sujet,s.val_sujet,'form__text','form__field--focused','s-sujet',true,false,false,l_sujet,'','',false) }}
                    <div class="form__fieldset">
                        <div class="form__field form__field--focused form__field--long-answer form__field--required">
                            <label class="form__label" for="s-message">
                                <span class="form__span">{{ l_message }}</span>
                            </label>
                            <textarea class="form__text form__text--area" required="required" id="s-message"
                                      name="{{ s.form_message }}">{{ s.val_message }}</textarea>
                            <i class="material-icons form__icon--warning">error</i>
                            <i class="material-icons form__icon--success">check_circle</i>
                        </div>
                    </div>
                    <div class="form__fieldset">
                        <div class="form__field form__field--focused form__field--multiple form__field--radio">
                            <label class="form__label form__label--multiple" for="s-newsletter">
                                <input class="form__checkbox" type="checkbox" id="s-newsletter"
                                       name="{{ s.form_newsletter }}" value="1"/>
                                <span class="form__box"></span>
                                <span class="form__span form__span--multiple">{{ l_partage_inscription_newsletter }}</span>
                            </label>
                            <i class="material-icons form__icon--warning">error</i>
                            <i class="material-icons form__icon--success">check_circle</i>
                        </div>
                    </div>
                    <div class="share-friend__nowrap">
                        <div class="form__fieldset">
                            <div class="form__field form__field--btnArea form__field--right form__field--cancel">
                                <button class="button form__button" type="submit" name="{{ s.form_cancel }}"
                                        value="cancel">{{ l_annuler }}</button>
                            </div>
                        </div>
                        <div class="form__fieldset">
                            <div class="form__field form__field--btnArea form__field--right">
                                <button class="button form__button" type="submit"
                                        name="{{ s.form_valid }}">{{ l_envoyer }}</button>
                            </div>
                        </div>
                    </div>
                {% else %}
                    {{ forms.wiziInput('text',s.form_name,form.val_name,'form__text','','s-name',true,false,false,l_votre_nom,'','',false) }}
                    {{ forms.wiziInput('email',s.form_mail_exp,form.val_mail_exp,'form__text form__text--mail','','s-mail',true,false,false,l_email_exp,'','',false) }}
                    {{ forms.wiziInput('text',s.form_nam_dest,form.val_name,'form__text','','s-nameDest',true,false,false,l_nom_dest,'','',false) }}
                    {{ forms.wiziInput('email',s.form_mail_dest,form.val_mail_exp,'form__text form__text--mail','','s-mailDest',true,false,false,l_email_dest,'','',false) }}
                    {{ s.form_hidden_id|raw }}
                    <div class="form__fieldset">
                        <div class="form__field form__field--btnArea form__field--right">
                            <input name="{{ s.form_valid }}" class="form__button button" type="submit"
                                   value="{{ l_suite }}"/>
                        </div>
                    </div>
                {% endif %}
            </form>
        {% endfor %}
    {% endif %}

</div>

{% if nosto %}
    {% for n in nosto %}
        {% if n.type == 'BLOCK_PAGE_PRODUCT' %}
            <div class="nosto_element nosto-prod-details" id="{{ n.nosto_id }}"></div>
        {% endif %}
    {% endfor %}
{% elseif prod.list_cross %}
    <div class="wrapper">
        <div class="prod prod--listCross">
            <h2 class="prod__title"><span class="hidden">{{ l_en_plus }}<span
                            class="section-target"> {{ l_of_product }} <strong
                                class="section-target-name">&laquo;&nbsp;{{ prod.name }}&nbsp;&raquo;</strong></span></span>&nbsp;{{ l_crosslist_title }}
            </h2>
            {% for cross in prod.list_cross|slice(0, 5) %}
                {# to edit : macro > Liste des produits #}
                {{ productList.product(cross,inLazy,currency_pre|raw,currency_post|raw,w_c_ttc,w_c_second_price,langProduct,webP,false,2,pro_access,w_c_prod_list_variations) }}
            {% endfor %}
        </div>
    </div>

{% endif %}

{% endfor %}
